#!/bin/bash
cudid=0

echo "Making sure we have a connection to a device...We can wait forever here..."
while [ $cudid -eq 0 ]
do
  udid=($(system_profiler SPUSBDataType | grep -A 10 iP | grep Serial | cut -d: -f2))
  udid=${udid[device_order]}
  cudid=${#udid}
done

udid=${udid// /}
echo "Device connected: $udid"
echo "Starting automation"

ruby cucumber.rb $udid
